@{
    ViewData["Title"] = "Home Page";
}

<script>
    var listLesson = [];
    var listContent = []

    function renderSibar() {
        $(".sidebar-list").empty();
        listLesson.forEach(function (item, index) {
            $(".sidebar-list").append('<li class="sidebar-item"><a href="#" onclick="return getContent('+item.lessonId+')" class="sidebar-link">'+item.lessonName +'</a></li>');
        });
    }
    function getContent(id) {
        
        $.ajax({
                "async": true,
                "crossDomain": true,
                "url": "@Url.Action("CSS", "Home")?id="+id,
                "headers": {
                    "Content-Type": "application/json",
                    "cache-control": "no-cache"
                },
                "method": "GET"
        }).done(function (result) {
                renderContent(result,id);
                
            }).fail(function (xhr) {
                console.log("get contents failed");
            });
        return false;
    }
    function getListLesson() {
        $.ajax({
                "async": true,
                "crossDomain": true,
                "url": "@Url.Action("GetListLesson", "Lesson")",
                "headers": {
                    "Content-Type": "application/json",
                    "cache-control": "no-cache"
                },
                "method": "GET"
        }).done(function (result) {
                listLesson = result;
                renderSibar();                
            }).fail(function (xhr) {
                console.log("get lesson list failed");
        });
    }
    function renderContent(data, id) {
        var lessonName = (listLesson.filter(x => x.lessonId == id))[0].lessonName;
        $(".content-title").text(lessonName);
        var target = $("#content-body");
        target.empty();
        data.forEach(function (item, index) {
            target.append(item.content);
            if (target.html().length > 0) {
                if (index < data.length - 1)
                    target.append("<hr>");
            }
        })
    }
    $(function () {
        getListLesson();
    })
</script>



